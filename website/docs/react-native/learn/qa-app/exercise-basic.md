---
title: QAアプリの実装（基本編）
sidebar_label: 基本編
hide_table_of_contents: true
---

## 6. 一覧画面（ホーム画面）の作成
### 6-1. 表示部品の作成
デザインシステムを参照して、画面の各表示部品をコンポーネントとして作成してください。
コンポーネントは○○/components配下に作成します。

例として、○○ボタンについて記載します。
○○/components配下に○○.tsxを作成してください。
デザインシステムの○○ボタンのデザインを見て、React Nativeで実現するためにライブラリの選定など実装方法を考えます。
今回はUIライブラリNativeBaseのButtonを使用します。NativeBaseのドキュメントを見ながらボタンを実装してください。

> ↑NativeBaseでいいか、使用ライブラリ確認

ボタンができたらデザインシステムのデザインになるようにスタイルを設定します。
表示部品のスタイル設定はデザインシステムを参照してください。
　　《スタイルを調整したNativeBaseのButtonの画像（完成形）を貼る》

同様に、他の表示部品も作成してください。

| コンポーネント | 補足 |
|--|--|
| ヘッダー |  |
| フッター |  |
| 上スクロールボタン |  |
| 新規作成ボタン |  |
| イベントカード |  |
| 質問カード |  |
| ユーザ情報（簡易） | アバター、氏名、今期ポイント数/累計ポイント数を表示する |
| ユーザ情報 | アバター、氏名、今期ポイント数/累計ポイント数、解決済ラベル、三点リーダーアイコンを表示する。三点リーダーアイコン押下で「問題を報告リンク」をdrawer表示する。リンク先は今回の実装範囲外のため未設定でよい |
| ソート/フィルタ/タグのボタンセット |  |
| どのくらい前の投稿かの表示 |  |
| いいねアイコン | いいねアイコンといいね数を表示 |
| 閲覧アイコン | 閲覧アイコンと閲覧数を表示 |
| 吹き出しアイコン | 吹き出しアイコンと回答数を表示 |
|  |  |

### 6-2. イベント表示エリアの実装
各表示部品ができたところで、一覧画面を作成していきます。
まずは画面上部のイベント表示部分について作成します。
デザインシステムとAPI仕様を参照して、作業を進めてください。

（補足）
- API呼び出しは後で実装するので、APIの戻り値は一旦、ソースコード上に直接記述しておく
- 掲載期間中のイベントのみを画面に表示する
- 「もっと見る」ボタン押下時の画面遷移は、後のイベント一覧画面作成のところで実装する


### 6-3. 質問表示エリアの実装
次に、質問表示部分について作成してください。

（補足）
- API呼び出しは後で実装するので、APIの戻り値は一旦、ソースコード上に直接記述しておく
- 縦スクロール時に質問部のラベル行を画面上部に固定する仕様は応用編で実装するため、現時点では質問部のラベル行は画面外にスクロールされてしまってよい
- ページ最上部で下にスワイプして離すとpull to refreshとなるようにする
- refresh中はローディングアニメを表示する
- 無限スクロールとなるようにする
- ソート
  - ソートアイコン押下で画面下部にソート条件の選択肢を表示する。初期選択値は最新順。現在選択されている選択肢がある場合は選択肢横にチェックマークを表示する。複数選択は不可とする
  - 最新順以外が選択されている状態のときはソートアイコンに色を付ける
  - フィルタが有効化された場合は、ソート順は最新順にリセットする
- フィルタ
  - フィルタアイコン押下で画面下部にフィルタ項目の選択肢を表示する。初期は未選択の状態。現在選択されている選択肢がある場合は選択肢横にチェックマークを表示する。複数選択は不可とする
  - フィルタしている状態のときはフィルタアイコンに色を付ける
  - ソートが有効化された場合は、フィルタは無しにリセットする
- タグによる絞り込み
  - タグアイコン押下で画面下部にタグの一覧を表示する。初期は未選択の状態。単一選択とする
  - タグでフィルタしている状態のときはタグアイコンに色を付ける
  - タグによる絞り込みについては、ソート・フィルタと同時指定を可能とする　
- 上スクロールボタン
  - Androidのみ表示する
  - 上スクロールボタン押下で画面再上部にスクロールとなるようにする
  - 上スクロールボタンは一覧画面の上に重ね、一覧画面をスクロールしても上スクロールボタンの表示位置は固定とする
  - iOSはスクロールバーをタップすることでOSの機能により画面上部にスクロールすることを確認すること
- 新規作成ボタン
  - 新規作成ボタンは一覧画面の上に重ね、一覧画面をスクロールしても新規作成ボタンの表示位置は固定とする
  - 新規作成ボタン押下時の画面遷移は後の入力画面作成のところで実装する

### 6-4. API呼び出し
画面表示に必要な情報をAPIで取得します。

例として、○○APIについて記載します。
○○/○○配下に○○.tsを作成してください。
　　《呼び出し方を書く。。。》

APIが呼び出せるようになったら、APIで取得した値を画面に表示するように修正してください。

同様に、他のAPIも呼び出して値を取得するようにしてください。

| API名 | 呼び出し箇所 | 補足 |
|--|--|--|
| イベント一覧取得 | 画面初期表示時、ホームボタン押下時 | 掲載期間中のイベントのみ取得 |
| 質問一覧取得 | 画面初期表示時、ホームボタン押下時、検索ボタン押下時、ソートアイコン押下時、フィルタアイコン押下時、タグアイコン押下時 | 検索、ソート、フィルタ時は条件を指定 |
| お知らせ一覧取得 | ベルアイコン押下時 |  |
| タグ一覧取得 | タグアイコン押下時 |  |

## 7. イベント一覧画面の作成
### 7-1. イベント一覧画面の実装
イベントの一覧画面を作成します。
デザインシステムとAPI仕様を参照して、作業を進めてください

（補足）
- API呼び出しは後で実装するので、APIの戻り値は一旦、ソースコード上に直接記述しておく
- 一覧画面（ホーム画面）のもっと見るボタン押下時に当画面に遷移するようにする
- すべてのイベントを表示する
- ページ最上部で下にスワイプして離すとpull to refreshとなるようにする
- refresh中はローディングアニメを表示する
- 無限スクロールとなるようにする
- 上スクロールボタン
  - 一覧画面（ホーム画面）と同様
- 新規作成ボタン
  - 一覧画面（ホーム画面）と同様

### 7-2. API呼び出し
画面表示に必要な情報をAPIで取得します。
以下のAPI呼び出しを追加し、ソースコードに直接値を記載していた箇所をAPIの戻り値を使用するように修正してください。

| API名 | 呼び出し箇所 | 補足 |
|--|--|--|
| イベント一覧取得 | 画面初期表示時 | すべてのイベントを取得 |

## 8. イベント詳細画面の作成
### 8-1. イベント詳細画面の実装
イベント詳細画面を作成します。
デザインシステムとAPI仕様を参照して、作業を進めてください。

（補足）
- API呼び出しは後で実装するので、APIの戻り値は一旦、ソースコード上に直接記述しておく
- 一覧画面（ホーム画面）またはイベント一覧画面のイベントタイトル押下時に当画面に遷移するようにする
- 選択されたイベント内容を表示する
- いいねボタン
  - いいねボタン押下によりいいねを付ける。もう一度押下するといいねを取り消す
  - いいねしたときは該当のいいねボタンの色を変える。いいねを取り消したら色を元に戻す

### 8-2. API呼び出し
画面表示に必要な情報をAPIで取得します。
以下のAPI呼び出しを追加し、ソースコードに直接値を記載していた箇所をAPIの戻り値を使用するように修正してください。

| API名 | 呼び出し箇所 | 補足 |
|--|--|--|
| イベント取得 | 画面初期表示時 |  |
| いいねの実施 | いいねボタン押下時 |  |

## 9. 質問詳細画面の作成
### 9-1. 表示部品のコンポーネント化
質問詳細画面で使用する新たな表示部品についてコンポーネントとして作成してください。

| コンポーネント | 補足 |
|--|--|
| コメントを追加するボタン |  |
| 回答作成ボタン |  |
|  |  |

### 9-2. 質問詳細画面の実装
質問詳細画面を作成します。
デザインシステムとAPI仕様を参照して、作業を進めてください。

（補足）
- API呼び出しは後で実装するので、APIの戻り値は一旦、ソースコード上に直接記述しておく
- 一覧画面（ホーム画面）のイベントタイトル押下時に当画面に遷移するようにする
- 質問に対する回答がある場合は、回答内容を表示する
- コメントアイコン
  - 質問部または回答部のコメントアイコン押下により、コメント表示エリアをアコーディオンのように開き表示する
  - コメント表示エリアを表示している間はコメントアイコンの色を変える。もう一度押下するとコメント表示エリアを閉じてアイコンの色をもとに戻す
  - 質問または回答に対してコメントがある場合はコメント内容を表示する
  - コメントが0件の場合は「コメントを追加する」ボタンのみ表示する
  - 「コメントを追加する」ボタン押下にてコメント入力フォームを表示する（「コメントを追加する」ボタンは非表示）
  - コメント入力フォームに文字入力して確定した際にコメント登録APIを呼び出す。API呼び出しはこの後のAPI呼び出しのところで実装する
- いいねボタン
  - イベント詳細画面と同様
- 上スクロールボタン
  - 一覧画面（ホーム画面）と同様
- 回答作成ボタン
  - 回答作成ボタンは詳細画面の上に重ね、一覧画面をスクロールしても新規作成ボタンの表示位置は固定とする
  - 回答作成ボタン押下時の画面遷移は後の入力画面作成のところで実装する

### 9-3. API呼び出し
画面表示に必要な情報をAPIで取得します。
以下のAPI呼び出しを追加し、ソースコードに直接値を記載していた箇所をAPIの戻り値を使用するように修正してください。

| API名 | 呼び出し箇所 | 補足 |
|--|--|--|
| 質問および対応する回答・コメント取得 | 画面初期表示時 |  |
| いいねリアクション | いいねボタン押下時 |  |
| コメント登録 | コメント入力フォームにコメントを入力して確定したとき |  |


## 10. 入力画面の作成
### 10-1. 表示部品のコンポーネント化
入力画面で使用する新たな表示部品についてコンポーネントとして作成してください。

| コンポーネント | 補足 |
|--|--|
| 投稿ボタン |  |
| 初心者マークアイコン |  |
| 日付選択のpicker | Santokuの部品を使用する？ |
| テンプレート・クリアボタン |  |
|  |  |

### 10-2. 入力画面の実装
入力画面を作成します。
デザインシステムとAPI仕様を参照して、作業を進めてください。

（補足）
- API呼び出しは後で実装するので、APIの戻り値は一旦、ソースコード上に直接記述しておく
- モーダル（画面の枠）作成
  - React Navigationで前画面の上に入力画面をモーダルで開く画面遷移を実装する
  - 一覧画面（ホーム画面）の新規作成ボタン押下時に当画面に遷移するようにする
  - イベント一覧画面の回答作成ボタン押下時に当画面に遷移するようにする
  - モーダルは固定（下スワイプで閉じたりしない）
- 質問とイベントのタブの作成
  - モーダル上部の質問/イベントタブにて質問入力とイベント入力をタブで切り替えられるようにする
- タグボタン
  - タグボタン押下でタグの一覧を画面下部に表示する
  - タグは複数選択可能とし、選択されているタグについては色を変える
- 初心者マーク
  - デフォルトは非活性。押下の度に活性/非活性を切り替える
- 質問・イベント内容の入力フォームを作成する
  - マークダウン入力は応用編で実装するため、現時点では非対応でよい
- テンプレート入力ボタン
  - 各テンプレートボタン押下にて選択されたテンプレート内容を詳細入力欄に入力された状態とする
  - テンプレートの入力内容はAPI呼び出しにて取得する。この後のAPI呼び出しのところで実装する
  - クリア押下にて詳細入力欄に入力された内容を削除する
- 入力モーダル左上の「×」押下で入力モーダルを閉じ、前画面を表示する
- 投稿ボタン押下で入力モーダルを閉じ、前画面を表示する
- 入力精査
  - 質問、イベントの最大文字数チェック
  - イベント掲載期間の日付チェック（当日以降、入力有無）エラーの場合はエラーメッセージを表示する

### 10-3. API呼び出し
画面表示に必要な情報をAPIで取得します。

| API名 | 呼び出し箇所 | 補足 |
|--|--|--|
| タグ一覧取得 | タグボタン押下時 |  |
| イベント登録 | イベントタブを選択した状態で投稿ボタン押下時 |  |
| 質問登録 | 質問タブを選択した状態で投稿ボタン押下時 |  |
| テンプレート取得 | テンプレートボタン押下時 |  |
