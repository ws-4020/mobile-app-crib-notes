---
title: ディープリンクの受信
---

ディープリンクをアプリケーションが受信するタイミングは２つあります。ユーザがアプリを起動していない状態でディープリンクから起動した場合とアプリが起動中の場合です。

## アプリケーションの状態とURLの取得

URLを取得するためのAPIはディープリンクで起動した場合と起動中の場合があります。

どちらの場合でもURLパラメータを取得して、画面遷移の判定をした上でパラメータを処理します。

### ディープリンクで起動した場合の受信

getInitialLinkについて記載する。

### アプリ起動中の受信

onLinkについて記載する。

### URLパラメータの保持

URLパラメータはコンテキストに入れるとしてもアプリケーションのコンテキストには入れない。
パラメータで持ち回るか、共有すべきコンテキストを整理する。

- アカウント登録まで: Routesパラメータで受け渡し
  ログイン画面から新規登録画面までRoutesパラメータでディープリンクのURLを任意で設定する
- Homeタブ: 不要
- Teamタブ: チーム詳細のRoutesパラメータに設定

### iOSで受け取る

iOSではではユーザの操作でディープリンクを受信したかどうかを判定するために[matchType](https://firebase.google.com/docs/reference/swift/firebasedynamiclinks/api/reference/Enums/DLMatchType.html)でハンドリングできます。
matchTypeが`unique`でないリンクは破棄します。
