---
title: ディープリンクの受信
---

ディープリンクをアプリケーションが受信するタイミングは２つあります。ユーザがアプリを起動していない状態でディープリンクを開く場合（コールドスタート）と

## アプリケーションの状態とURLの取得

URLを取得するためのAPIは[コールドスタート](https://rnfirebase.io/dynamic-links/usage#backgroundquit-events)と[バックグラウンド](https://rnfirebase.io/dynamic-links/usage#foreground-events)があります。

どちらの場合でもURLパラメータを取得して、画面遷移の判定をした上でパラメータを処理します。

### Cold Start

TODO:アプリの初期化見てみる

### バックグラウンドの場合

TODO:アプリの初期化見てみる

### URLパラメータの保持

URLパラメータはコンテキストに入れるとしてもアプリケーションのコンテキストには入れない。
パラメータで持ち回るか、共有すべきコンテキストを整理する。

- アカウント登録まで: Routesパラメータで受け渡し
  ログイン画面から新規登録画面までRoutesパラメータでディープリンクのURLを任意で設定する
- Homeタブ: 不要
- Teamタブ: チーム詳細のRoutesパラメータに設定

### iOSで受け取る

iOSではではユーザの操作でディープリンクを受信したかどうかを判定するために[matchType](https://firebase.google.com/docs/reference/swift/firebasedynamiclinks/api/reference/Enums/DLMatchType.html)でハンドリングできます。
matchTypeが`unique`でないリンクは破棄します。
