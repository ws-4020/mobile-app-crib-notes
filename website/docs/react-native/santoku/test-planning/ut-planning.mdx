---
title: 単体テスト計画
---

## テスト方針

単体テストでは、主に開発した画面や機能単位の動作を検証します。これにより、画面や機能単位の品質を保証することが目的となります。詳細は[全体テスト計画書のテスト方針](/react-native/santoku/test-planning/test-all-planning.mdx#テスト方針)を参照してください。

## テスト実施範囲

- 対象

  - モバイルアプリで実装した機能や画面全般
  - モバイルアプリが利用する外部サービスとの連携部分

- 対象外

  - バックエンド

:::info
このアプリはバックエンドを開発しません。そのため、モバイルアプリからのREST APIのリクエスト先はモックサーバになります。
:::

## テスト観点　★作成中★

既存のテスト観点参照。

## テスト実施環境

基本的にエミュレータ／シミュレータを用いて検証します。ただし、実機でしか確認できないようなOS依存の機能（例：カメラ）については、実機を用いて検証します。

### ビルドバリアント

使用する[ビルドバリアント](/react-native/santoku/development/build-configuration/build-variants.mdx)は、`devSantokuAppDebug`です。単体テストでは性能面の評価をしないため、デバッグ効率を重視する方針です。

### テスト端末　★作成中★

使用する端末の一覧を記載（詳細なスペックは全体計画に記載済のため、不要）

★そもそも、必要なのか。全体計画とテスト観点へのリンクと簡潔な説明で良いのでは。

## テスト方法

事前準備、テスト実施について記載します。

### 事前準備

単体テストの実施に必要な事前準備項目は以下のとおりです。

- 単体テスト仕様書

  テスト観点を元に、開発対象の画面や機能に応じたテストケースを網羅し、テストケースを一覧化した単体テスト仕様書を作成します。また、テスト観点に基づいて、各種テストケースの実施手段を手動テストと自動テストに分類します。

- テストコード

  テストケースの中で自動テストに分類されるものについて、テストコードを作成します。テストコードの記述内容はテストケースに従ってください。

  また、テストフレームランナには[Jest](https://jestjs.io/ja/) 、テストライブラリには[React Native Testing Library](https://callstack.github.io/react-native-testing-library/)を採用します。

- モックサーバ

  OpenAPI定義を元にモックサーバを立てます。モックサーバには[mockoon](https://mockoon.com/)を採用します。

- エミュレータ／シミュレータ

  [同一構成のエミュレータの利用](/react-native/santoku/development/test/emulator-with-same-config.mdx)を参照し、エミュレータ／シミュレータを準備します。

### テスト実施

テスト実施は手動テストと単体テスト、それぞれで行います。

- 手動テスト

  作成したテストケースに従い、機能や画面単位での動作を検証します。実際の動作とテストケースの期待結果が合致していることを確認します。

- 自動テスト

  作成したテストコードを`jest`コマンドで検証します。

  ```bash
  npx jest --detectOpenHandles --runInBand --reporters=default --reporters=jest-junit --coverage
  ```

  上記コマンドを実行すると、カバレッジレポートファイルが`coverage`フォルダに出力されます。`c0/c1`のカバレッジが100%に達していない場合は、カバレッジ未達一覧に未達理由を記載します。

## テスト結果のエビデンス

テスト結果のエビデンスとして、以下のものを残します。

- 単体テスト仕様書

テストケースおよび、テスト結果を記載したドキュメントです。

- カバレッジレポート

自動テストで出力されるカバレッジレポートファイル一式です。もし`c0/c1`のカバレッジが100%に達していない場合は、カバレッジ未達一覧も含みます。

## テストの合否判断

以下の条件をすべて満たしていることが、単体テストの合格条件です。

- [x] 単体テスト仕様書に記載したすべてのテストケースに合格していること
- [x] 自動テストを実行した際にエラーが発生していないこと
- [x] 自動テストの`c0/c1`のカバレッジが100%に達していること。もし未達の場合は、カバレッジ未達一覧に記載されている未達理由が妥当であること
