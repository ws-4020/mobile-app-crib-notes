---
title: 単体テスト計画
---

単体テストのテスト方針は以下のとおりです。

## テスト方針

| NO | カテゴリ | 内容 |
| --- | :--- | :--- |
| 1 | [テスト実施内容](#テスト実施内容) | テストの実施方法毎の確認観点 |
| 2 | [網羅の方針](#網羅の方針) | それぞれのテスト方法毎の網羅の方針 |
| 3 | [テスト環境](#テスト環境) | テストを実施するテスト環境 |
| 4 | [事前準備](#事前準備) | テスト実施前に必要となる準備事項とその準備内容 |

## テスト実施内容

テストは手動（打鍵）と自動の2種類を実施します。
それぞれのテスト方法毎の確認内容は以下のとおりです。

### 手動（打鍵）テストの実施内容

- 画面単位で関連する設計書と比較してレイアウトやイベントの動作を検証する
- API連携部分は、モックサーバと接続して、動作を検証する
- テスト観点表をベースにテスト対象の画面を確認する観点を選定して、動作を検証する

### 自動テスト

- テスト観点表をベースにテスト対象の機能を確認する観点を選定して、テストコードを作成して動作を検証する

## 網羅の方針

- 全画面（機能）の単体テストケースの実施が全て完了していること
- 自動テストでのC0/C1カバレッジが100%となっていること

## テスト環境

単体テストは、開発用PCのローカル環境で実施します。使用する機種とOSバージョンのバリエーションは、[単体テスト](../all/test-environment#単体テスト)で、定義したものでテストを実施します。

## 事前準備

テスト実施前に以下のことを準備します。

## テストデータ

テスト実施に必要なデータパターンを洗い出し、作成する。
自動テストは、対象となる機能の処理仕様を網羅できるようなテストコードを作成する。

## モックサーバ

単体テストを実施する開発PCのローカル環境でモックサーバを起動して、単体テストを実施します。
今回は、[mockoon][mockoon]を利用して、モックサーバを構築して、起動します。
Jsonファイルを作成して、モックサーバの環境設定やそれぞれのテストで必要となるレスポンス値を設定します。

[mockoon]:https://mockoon.com/

## シミュレータ、エミュレータ使用方法

### iOSシミュレータ

Xcodeを起動して、シミュレータのダウンロードと起動確認をします。

- シミュレータのダウンロード

メニューバーの`Xcode > Preference`を開いて、`Components`タブを選択して、表示されているシミュレータの中から必要なものを選択して、インストールする。

- シミュレータの起動

メニューバーの`Xcode > Open Developer Tool > Simulator`を選択して、シミュレータを起動する。

### Androidエミュレータ

Android Studioを起動して、エミュレータの作成と起動確認をします。

- エミュレータの作成

Android Studio下部の`構成 > AVDマネージャー > 仮想デバイスの作成`を選択して、エミュレータを作成する。

- エミュレータの起動

Android Studio下部の`構成 > AVDマネージャー > 起動したいエミュレータのアクション：▶`を押下して起動する。

## スマホ実機使用方法

### iOS

- MacとiPhoneをUSBケーブルで接続する
- Mac側でXcodeを起動して、左上のDevice選択欄から接続したiPhoneを選択する
- iPhoneで`設定 > 一般 > プロファイルとデバイス管理（または、VPNとデバイス管理）`の中で`デベロッパApp`欄の`XXXX`[^1]を選択して、`XXXXを信頼`[^1]をタップして、`信頼`をタップ
- アプリ一覧のビルドしたアプリのアイコンをタップして動作を確認する

:::note
使用するiPhoneを初めてMacにUSB接続する場合、iPhone側へ`このコンピュータを信頼しますか？`のメッセージが表示されます。
メッセージに対して、`信頼`するを選択してください。その後、パスコード入力を求められるのでそちらも入力します。
:::

[^1]: `XXXX`はApple IDです。

### Android

- PCとAndroid端末をUSBケーブルで接続する
- Android端末側で`このデバイスをUSBで充電中`の通知をタップして、`USBの使用`の下で`ファイル転送`を選択する
- Android端末の設定画面を開いて、一番下の方に`端末情報`というメニューがあるのでタップする
- ビルド番号を7回タップする（`これでデベロッパーになりました！`と表示されればOK）
- 設定画面に戻り、`開発者向けオプション`というメニューが表れているのでそれをタップして、`ON`を有効にしてさらに`USBデバッグ`を有効にする
- PC側でAndroid Studioを起動して、実行ボタンを押下して、Android端末側で動作を確認する

### Androidエミュレータのノッチ設定

- ノッチ有の設定

1. ホーム画面で、下から上へスワイプして、アプリ一覧から`Settings`をタップする
1. 一覧から`About emulated device`をタップする
1. `Build number`を7回タップする
1. アプリ一覧から`System`をタップする
1. `Advance`をタップする
1. `Developer options`をタップする
1. `Display cutout`をタップして、`Tall cutout`をタップする

- ノッチ無の設定

1. ホーム画面で、下から上へスワイプして、アプリ一覧から`Settings`をタップする
1. 一覧から`About emulated device`をタップする
1. `Build number`を7回タップする
1. アプリ一覧から`System`をタップする
1. `Advance`をタップする
1. `Developer options`をタップする
1. `Display cutout`をタップして、`Device default`をタップする
