---
title: ユーザ操作と画面遷移に関する観点
---

ここではユーザ操作と画面遷移の挙動に関する単体テスト観点をまとめています。
それぞれのテスト観点を検証する際のテスト環境の種類は、以下のとおりです。

- (A) Jestを利用して、作成したテストコードで自動テストを実行して確認
- (B) シミュレータ（Android、iOS（iPadOS）毎に、テスト対象構成の中でOSバージョンの中で最新のもの）
- (C) シミュレータ（Android、iOS（iPadOS）毎に、全テスト対象構成（OSバージョンや画面アスペクト比が異なる複数パターン））
- (D) 実機（全テスト対象端末）

## 画面内操作・イベント実行

### エラーハンドリング

| NO | 詳細 | 観点 | 補足 | テスト環境 |
| --- | --- | --- | --- | --- |
| 1 | ユーザ操作 | ユーザ操作に伴う処理中にエラーが発生した場合、エラーの内容や取るべきアクションがユーザに伝わるように何らかの形で通知されていること | - | B |
| 2 | ユーザ操作 | ユーザ操作に伴う処理中にエラーが発生した場合、再実行が可能な場合はボタン等の非活性状態が解除されていること | - | B |
| 3 | ユーザ操作以外のイベント処理 | 初期データ読み込みなどの処理中にエラーが発生した場合、リトライ可能な処理であればリトライ可能なUIが提供されていること（一覧に表示する情報を取得するのに失敗した場合、WebViewに表示するページの取得に失敗した場合など） | - | B |
| 4 | ユーザ操作以外のイベント処理 | 初期データ読み込みなどの処理中にエラーが発生した場合、ユーザ影響がある場合はエラーの内容や取るべきアクションがユーザに伝わるように何らかの形で通知されていること | - | B |

### ログ出力

| NO | 詳細 | 観点 | 補足 | テスト環境 |
| --- | --- | --- | --- | --- |
| 1 | ユーザ操作  | ユーザ操作に伴う処理中に正常系のログ出力が設計されている場合、設計通りにログが出力されていること | - | A |
| 2 | ユーザ操作  | ユーザ操作に伴う処理中にエラーが発生した場合、方式設計のエラーハンドリング方針に沿ってログが出力されていること | - | A |
| 3 | ユーザ操作以外のイベント処理  | 初期データ読み込みなどの処理中に正常系のログ出力が設計されている場合、設計通りにログが出力されていること | - | A |
| 4 | ユーザ操作以外のイベント処理  | 初期データ読み込みなどの処理中にエラーが発生した場合、方式設計のエラーハンドリング方針に沿ってログが出力されていること | - | A |

## 画面遷移

### アプリ内での画面遷移

| NO | 詳細 | 観点 | 補足 | テスト環境 |
| --- | --- | --- | --- | --- |
| 1 | 画面UI操作からの遷移 | 正常処理時の画面遷移先が設計通りであること | - | B |
| 2 | 画面UI操作からの遷移 | 異常処理時の画面遷移先が設計通りであること | - | B |
| 3 | 再実行時の遷移 | 異常処理後の正常処理など、処理の連続実行を行った場合の遷移が設計通りであること | - | B |
| 4 | 遷移アニメーション | 画面遷移時のアニメーションが設計通りであること | - | B |
| 5 | 画面UI上の戻るボタン遷移 | ヘッダ上などに戻るボタンが用意されている場合、押下時の遷移先画面が設計通りであること | 例：画面A→画面B→画面C→「戻る」ボタン→画面B | B |
| 6 | スワイプで戻る機能による遷移 | スワイプで戻る機能が有効な場合、スワイプで戻った時の遷移先画面が設計通りであること | iOS特有の観点 | B |
| 7 | スワイプで戻る機能による遷移 | スワイプで戻る機能を無効にしている場合、スワイプ操作をしても画面遷移しないこと | iOS特有の観点 | B |
| 8 | 物理または仮想Backキーによる遷移 | 物理Backキーまたはナビゲーションバー内の仮想Backキー押下後の遷移先画面が想定通りであること | Android端末特有の観点 | B |
| 9 | 戻った後の再遷移 | 戻る操作を行った後に同じ画面に再度遷移した場合に、多重実行されると問題のある初期処理が再実行されないこと | - | B |

### アプリ外操作からの画面遷移

| NO | 詳細 | 観点 | 補足 | テスト環境 |
| --- | --- | --- | --- | --- |
| 1 | ディープリンク | アプリ外でディープリンクをタップした場合の遷移先画面が設計通りであること | - | D |
| 2 | ディープリンク | アプリ外でディープリンクをタップした場合に遷移先画面でディープリンクのパラメータを画面表示に利用する場合、設計通りに表示されていること | - | D |
| 3 | プッシュ通知 | アプリ外で通知をタップした場合の遷移先画面が設計通りであること | - | D |
| 4 | プッシュ通知 | アプリ外で通知をタップした場合に遷移先画面で通知のパラメータを画面表示に利用する場合は、設計通りに表示されていること | - | D |

### バックグラウンド状態からの遷移

| NO | 詳細 | 観点 | 補足 | テスト環境 |
| --- | --- | --- | --- | --- |
| 1 | バックグラウンドからの復帰 | アプリをバックグラウンド状態にした後、フォアグラウンド状態へ戻した時、画面表示内容が想定通りであること | - | B |
| 2 | バックグラウンド状態での表示 | アプリをバックグラウンド状態にした後、Appスイッチャー表示での画面表示内容が想定通りであること | - | B |
| 3 | スリープへの移行 | アプリでスリープを無効にしていない画面を開いたまま無操作で放置した場合、端末がスリープ状態に移行すること | - | B |
| 4 | スリープへの移行 | アプリでスリープを無効にした画面を開いたまま無操作で放置した場合、端末がスリープ状態に移行しないこと | - | B |
| 5 | スリープからの復帰 | アプリがフォアグラウンド状態で端末がスリープ状態に移行し、その後に復帰した時に画面表示内容が想定通りであること | - | B |

### アプリの強制終了

| NO | 詳細 | 観点 | 補足 | テスト環境 |
| --- | --- | --- | --- | --- |
| 1 | 強制終了 | 通信途中にプロセスがkillされた場合の挙動が想定通りであること | 例：ファイルダウンロード中にプロセスをkill | B |
| 2 | 割り込み | 処理途中にアプリが割り込みによってバックグラウンド状態となった場合の挙動が想定通りであること | 例：サーバとの通信中に電話着信 | D |
