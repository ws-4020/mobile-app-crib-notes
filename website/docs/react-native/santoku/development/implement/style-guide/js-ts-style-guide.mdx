---
title: JavaScript/TypeScriptのコーディング規約
---

このアプリでJavaScript/TypeScriptをコーディングする際に準拠しなければならない標準ルールについて記述します。

このページに記載したルールのうち、必ず守るべきものについては、タイトルの文末に「★」マークをつけています。
「★」マークがついていないルールは、画一的に適用できるものではなく、どちらかというとコーディングする際に知っておくべき心得や注意事項に近いものとなります。
内容をよく読み、ルールの適用可否を慎重に判断してください。

なお、前提として[静的解析ツール](./overview#静的解析ツール)でチェック可能なルールについては記載していません。

## コードスタイルに関する規約

### 命名規約

プログラム中の各識別子の命名規則について記載します。

#### 変数 ★

変数の名前は、その変数に格納する内容を端的に表す名詞とし、必要に応じて前後に形容詞、形容詞句を付加します。
また、誤読の心配が無い限り冠詞は省略します。
先頭文字は小文字とし、各単語はキャメル記法に従って連結します。

特に、変数の内容がリストやハッシュテーブルのようなコレクションとして使用される場合は、
変数名は要素を表す名詞の複数形か、そのコレクション自体を表す名詞とします。

以下は本規約に従った命名例です。

```typescript
let nextNode = null;       // (形容詞) + (名詞)
let prevNode = null;       // (形容詞) + (名詞)
let totalNumOfNodes = 0;  // (形容詞) + (名詞) + (形容詞句)
```

#### 定数 ★

定数は必ずconstを使用して定義します。
変数名は全て大文字かつ単語間の区切りにアンダースコア（`_`）を用います。

以下は本規約に従った命名例です。

```typescript
const PI                      = 3.1416;
const MAX_THRESHOLD_FREQUENCY = 40000;
```

#### ループ変数 ★

for文等のループ構文において、カウンタとして使用される変数の名称には、
慣用的に使用される変数名`(i, j, k ...)`を使用できます。

#### 変数（真偽値） ★

真偽値を格納する変数の名前は、形容詞、もしくは節とします。
節の時制は、基本的に状態動詞の場合は現在形、動作動詞の場合は過去形とし、主語が明確である場合は省略します。

以下は本規約に従った命名例です。

```typescript
let isValid = false;          // (現在形状態動詞:主語省略)
let needsDefault = true;      // (現在形状態動詞:主語省略)
let loadingFinished = false;  // (過去形動作動詞)
let available = true;         // (形容詞)
let inProgress = false;       // (形容詞句)
```

#### 変数（関数名） ★

JavaScriptでは関数も単なるオブジェクトであるため、関数名は単に関数オブジェクトを格納する変数の名前です。
関数オブジェクトを格納する変数の名前は、その処理の内容を端的に表す原型の動作動詞とします。
関数が引数をとる場合は、その引数の内容を目的語とする前置詞を追加し、（動詞 + 前置詞）としてもよいです。

なお、その関数が、内部状態を変更しない単純な問い合わせ処理（いわゆるアクセサ）である場合は、その関数の戻り値の内容を端的に表す名詞としてもよいです。
また、関数オブジェクトをスコープの外部で実行することを意図して、引数や戻り値を通じて受け渡す場合も、その目的を表す名詞としてよいです。

以下は本規約に従った命名例です。

```typescript
function initialize() {           // (原形動作動詞)
// ...
}
function appendTo(parentNode) {   // (原形動作動詞) + (前置詞)
// ...
};
function price() {                // (名詞)
// ...
return this.attributes.price;
}

function lastRecordOf(resultSet) { // (名詞) + (前置詞)
// ...
return resultSet[resultSet.length];
}

let callback = function() {        // (名詞)
// ...
  return callback;
};
```

#### クラス ★

クラス名は、基本的にそのクラスの特徴を端的に表す名詞とし、先頭の文字は大文字で開始してください。

以下は本規約に従った命名例です。

```typescript
class Logger {
// ...  
}
```

#### インターフェース ★

インターフェース名は、そのインターフェースの特徴を端的に表す名詞とし、先頭の文字は大文字で開始してください。

以下は本規約に従った命名例です。

```typescript
interface Transport {
// ...  
}
```

#### 型エイリアス ★

型エイリアスは、その型の特徴を端的に表す名詞とし、先頭の文字は大文字で開始してください。

以下は本規約に従った命名例です。

```typescript
type Account = {
// ...  
}
```

### リテラルの記述

#### 正規表現リテラルの記述 ★

正規表現を使用する場合は、可能であれば、文字列引数ではなく、正規表現リテラルを使用してください。
ただし、正規表現の内容が動的に変わる場合や、正規表現の内容が複雑でコメントが必要となる場合は、`RegExp()`コンストラクタを使用してください。

## プログラムの堅牢性に関する規約

### プログラムの堅牢性

#### オブジェクトのループにはObject.keysを利用してください。★

`for-in`ループでは、プロトタイプチェイン上のプロパティも走査するため、本来、予期しない要素が処理対象となってしまう場合があります。
これを避けるため、`Object.keys()`を使ってループを記述してください。

```typescript title="記述例"
let record = getRecord();

Object.keys(record).forEach(function(key) {
  console.log(record[key]);
});
```

#### グローバル変数は定義しないでください。 ★

グローバル変数を新たに定義することは禁止します。

#### プロトタイプは拡張しないでください。 ★

既存のコンストラクタ関数に対するプロトタイプオブジェクトの変更を原則として禁じます。

## Moduleに関する規約

### Module

#### Moduleの単位

アプリ内の各ファイルは、1つの論理的な`Module`を表すべきです。
無関係なさまざまな関数やシンボルをエクスポートするような`Module`は避けてください。

多くの場合、これは1つのファイルに付き1つの`export`を持つことが良いことを意味します。
ただし、`export`する関数と関係性が強い定数など、同じファイルに定義することにより保守性が高くなると考えられる場合は、例外としても構いません。
