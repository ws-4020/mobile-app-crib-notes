---
title: ビルド
sidebar_label: 概要
---

モバイルアプリの開発では、ステージング環境や本番環境などに応じて、接続先のサーバやアプリアイコンなどを変更したいケースが多くあります。

それらのケースに対応するため、このアプリではExpoの[Prebuild](https://docs.expo.dev/workflow/prebuild/)や、[Config Plugins](https://docs.expo.dev/guides/config-plugins/)などの仕組みを利用して、柔軟にビルドを設定できるようにしています。

> TODO: 以下の内容については、以降も触れていない
> どこに記載するべき、もしくは記載しなくても良いか要検討
> - developmentの他のメニュー構成に合わせる
> - Firebaseの設定ファイルについて記載
> - ios/androidディレクトリは削除

## Prebuild

Expoには、アプリのネイティブプロジェクト（`ios`、`android`ディレクトリ）を自動生成するPrebuildという機能があります。

`npx expo prebuild`を実行すると、[expo-template-bare-minimum](https://github.com/expo/expo/tree/main/templates/expo-template-bare-minimum)をベースにネイティブプロジェクトが生成されます。
アプリアイコンや、アプリケーションIDなど多くの設定値は、[Expo config（app.json, app.config.js）](https://docs.expo.dev/versions/latest/config/app/)に指定した値で変更することが可能です。

## Config Plugins

前述したように、Prebuild時に生成するネイティブプロジェクトの設定は、Expo configに指定した値で変更することが可能です。
Expo configに設定された値は、Expoが標準で用意しているConfig Pluginsによって、Prebuild時に生成されるネイティブプロジェクトに反映されます。

しかし、アプリによってはExpo configで指定可能な設定以外にも、変更したい設定値が存在するケースがあります。

例えば、このアプリではステージング環境や本番環境などに応じてビルド時の署名設定を変更したいと考えています。
しかし、Expo configでは署名設定を変更することができません。

それらのケースに対応するには、アプリ特有のConfig Pluginsを作成してPrebuild時に適用します。
