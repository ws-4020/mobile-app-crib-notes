---
title: スナックバー
sidebar_label: スナックバー
---
## 概要

スナックバーは、ユーザにメッセージを通知するコンポーネントです。画面下部に表示され、一定時間が経過すると自動的に消えます。

## 機能

- 指定されたメッセージを、画面下部に表示します。
- 表示から一定時間が経過したら自動で閉じます。表示時間はデフォルトでは4秒です。ただし、スナックバーを表示する際に、表示時間の指定もできます。
- 表示時間を過ぎていなくても、ユーザ操作によって閉じることもできます。
- 任意の表示位置を指定できます。
- 任意のスタイルを指定できます。
- 任意のアクションを指定できます。アクションを指定すると、メッセージ横にボタンが表示されます。
- 表示や非表示の開始は共通のメソッドで制御できるようにします。詳細は[本アプリでの共通化][]を参照してください。

## イメージ

![layout](./layout.drawio.png)

## 入力項目

なし。

## 表示項目

| 番号 | 名称          | 項目種別    | 取得元               | 表示/活性条件                                 |
|:----|:--------------|:-----------|:--------------------|:--------------------------------------------|
| O1  | メッセージ      | ラベル     | -（※1）               |                                            |
| O2  | アクションボタン  | ボタン      | -（※2）              | プロパティ：actionTextとactionHandlerが指定されている場合のみ表示 |
（※1）プロパティ：messageで任意の文字列を指定できます。<br />
（※2）プロパティ：actionTextで任意の文字列を指定できます。

## 操作項目

| 番号 | 名称        | 項目種別    | 操作種別   | 発生するイベント   | 表示/活性条件                               |
|:----|:------------|:-----------|:----------|:----------------|-------------------------------------------|
| T1  | アクションボタン | ボタン    | タップ    | -（※1）| プロパティ：actionTextとactionHandlerが指定されている場合のみ表示 |
（※1）プロパティ：actionHandlerで任意の処理を指定できます。

## イベント定義

- 初期表示
  - 指定されたメッセージを表示します。
  - 一定時間を経過したら閉じます。

## プロパティ

後述の[本アプリでの共通化][]のとおり、スナックバーの表示や非表示を制御する際は共通のメソッドを使用します。以下のように、表示または非表示のメソッドによって指定できるプロパティが変わります。

### 表示メソッド用プロパティ

| 名称           | 必須 | 型     | 説明                                                   |
|:--------------|:-----|:-------|:------------------------------------------------------|
| message       | ○    | string | メッセージに表示する文字列                                |
| messageTextStyle       | -    | [TextStyle][] | メッセージに表示する文字列のスタイル        |
| style       | -    | [ViewStyle][] | スナックバーのスタイル                               |
| animatedContainerStyle       | -    | [ViewStyle][] | スナックバー外周のスタイル<br />表示位置などはこちらで指定します |
| actionText       | -    | string | アクションボタンに表示する文字列                       |
| actionHandler       | -    | function | アクションボタンタップ時の処理            |
| actionTextStyle       | -    | [TextStyle][] | アクションボタンに表示する文字列のスタイル           |
| autoHideDuration       | -    | number | 表示してから自動で閉じるまでの時間（ミリ秒）<br />デフォルトは4000ms   |
| fadeInDuration       | -    | number | 表示する際のフェードイン演出の時間（ミリ秒）<br />デフォルトは1000ms                         |
| fadeOutDuration       | -    | number | 自動で閉じる際のフェードアウト演出の時間（ミリ秒）<br />デフォルトは1000ms                    |
| forceFadeOutDuration       | -    | number | 強制的に閉じる（※1）際のフェードアウト演出の時間（ミリ秒）<br />デフォルトは300ms              |

（※1）スナックバー表示中に新たなスナックバーを表示する場合、先に表示していたスナックバーは強制的にフェードアウトして閉じます。

### 非表示メソッド用プロパティ

| 名称           | 必須 | 型     | 説明                                                   |
|:--------------|:-----|:-------|:------------------------------------------------------|
| hideFadeOutDuration       | -    | number | 後述の`hide`メソッドがコールされた際のフェードアウト演出の時間（ミリ秒）<br />指定がない場合は`forceFadeOutDuration`の値が利用されます。 |

## エラー発生時の処理

なし。

## スナックバーの複数表示について

- 複数のスナックバーを同時に表示できません。
- スナックバー表示中に新たなスナックバーを表示する場合、表示中のスナックバーをフェードアウトしてから新しいスナックバーを表示します。
  - この場合、先に表示していたスナックバーは表示時間を経過していなくてもフェードアウトします。

## 本アプリでの共通化

本アプリでは、上記の[イメージ](/react-native/santoku/design/screen-specs/common-parts/snackbar/overview#イメージ)のように「閉じる」ボタンを配置したスナックバーを多用します。
そのため、どの画面からでも共通の手段でスナックバーを制御できるように、下記メソッドを提供します。

| メソッド | 指定可能なプロパティ |  説明 |
|:--------|:-------------------|:------|
| show | [表示メソッド用プロパティ][] | スナックバーを表示する |
| showWithCloseButton | [表示メソッド用プロパティ][]から以下すべてを除外したプロパティ<br />・ `actionText`<br />・ `actionHandler`<br />・ `actionTextStyle`  | スナックバーを「閉じる」ボタン付きで表示する |
| hide | [非表示メソッド用プロパティ][] | スナックバーを非表示にする |

<!-- link定義を使う場合は以下に記載する -->
[ViewStyle]: https://reactnative.dev/docs/view-style-props
[TextStyle]: https://reactnative.dev/docs/text-style-props
[表示メソッド用プロパティ]: /react-native/santoku/design/screen-specs/common-parts/snackbar/overview#表示メソッド用プロパティ
[非表示メソッド用プロパティ]: /react-native/santoku/design/screen-specs/common-parts/snackbar/overview#非表示メソッド用プロパティ
[本アプリでの共通化]: /react-native/santoku/design/screen-specs/common-parts/snackbar/overview#本アプリでの共通化
