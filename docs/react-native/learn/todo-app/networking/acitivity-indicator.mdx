---
title: REST API呼びだし中の表示
---

REST APIの呼びだしは時間がかかることが多いので、呼びだし中であることをユーザに伝えるのが望ましいです。

また、削除したToDoの編集など、REST APIでの処理が完了するまでブロックしたい操作もあります。

ToDoアプリでは、REST APIの呼びだし中はToDo一覧上に、ローディング中であることを伝えるアクティビティインジケーターを表示します。また、ToDo一覧内での完了や編集などの操作をブロックします。

> 🚧 作成中 🚧

<!--
TODO: API呼びだし中にどんな感じに表示されるかの画像を貼ってあげたほうがいいかも。
-->

## REST APIの呼びだし状態の管理

まず、REST APIを呼び出すコンポーネントで、REST APIを呼びだし中かどうかを管理します。状態の管理には、Reactのステートを利用します。

> 🚧 作成中 🚧

<!--
TODO: Hooksの説明はいらないっけ。ステートはここまでほとんど触れてない気もするから、書いてあげたほうがいい気がする。
-->

:::caution
現時点では、エラー発生時の処理は実装しませんが、実装中にどのようなエラーが発生しているかを確認したいことは多いのでログ出力だけしています。

本来は、エラーが発生した場合にはユーザにもエラーの内容と（可能であれば）エラーから回復する方法を伝えるべきです。
:::

## アクティビティインジケータの表示

次に、REST APIを呼び出している間だけアクティビティインジケータを表示するように修正します。

> 🚧 作成中 🚧

<!--
TODO: ステートを参照して、表示するかどうかを切り替えることと、下に配置すると上に表示されるから操作をブロックできることを伝えられれば良いだろうか。
-->

