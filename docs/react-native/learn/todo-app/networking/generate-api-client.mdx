---
title: APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ä½œæˆ
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

ToDoã‚¢ãƒ—ãƒªã§ã¯å„ç”»é¢ã§`TodoService`ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¾ã™ãŒã€`TodoService`ã‹ã‚‰ç›´æ¥REST APIã‚’å‘¼ã³ã ã™ã®ã§ã¯ãªãå…±é€šçš„ãªAPIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ç”¨æ„ã—ã¾ã™ã€‚
APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¯ã€APIã¨é€šä¿¡ã—ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®JSONã¨JavaScriptã®ã‚¯ãƒ©ã‚¹ã¨ã®å‹å¤‰æ›ã‚„å…±é€šçš„ãªã‚¨ãƒ©ãƒ¼å‡¦ç†ã‚’æ‹…å½“ã—ã¾ã™ã€‚

## Open APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‹ã‚‰è‡ªå‹•ç”Ÿæˆ

ToDoã‚¢ãƒ—ãƒªã§ã¯ã€Open APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‹ã‚‰APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’è‡ªå‹•ç”Ÿæˆã—ã¾ã™ã€‚

ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ¼ãƒ‰ã®ç”Ÿæˆã«ã¯ã€[OpenAPI Generator](https://openapi-generator.tech/)ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚OpenAPIãŒæä¾›ã—ã¦ã„ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã€OpenAPIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‹ã‚‰æ§˜ã€…ãªã‚‚ã®ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚TypeScriptç”¨ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ¼ãƒ‰ã«ã¤ã„ã¦ã‚‚æ§˜ã€…ãªå®Ÿè£…ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ãŒã€ã“ã“ã§ã¯typescript-fetchã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

ToDoã‚¢ãƒ—ãƒªã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«`openapi-generator-cli` ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

```console
npm install @openapitools/openapi-generator-cli -D
```

è‡ªå‹•ç”Ÿæˆã§åˆ©ç”¨ã™ã‚‹OpenAPIã¯[mobile-app-hands-on-backend](https://github.com/ws-4020/mobile-app-hands-on-backend/tree/main/rest-api-specification)ã§å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚

`npx`ã‹ã€package.jsonã«`npm script`ã‚’è¿½åŠ ã—ã¦APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’è‡ªå‹•ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚

<!-- textlint-disable ja-technical-writing/sentence-length,ja-technical-writing/max-comma,ja-spacing/ja-no-space-around-parentheses,jtf-style/3.3.ã‹ã£ã“é¡ã¨éš£æ¥ã™ã‚‹æ–‡å­—ã®é–“ã®ã‚¹ãƒšãƒ¼ã‚¹ã®æœ‰ç„¡,ja-technical-writing/ja-no-mixed-period,ja-technical-writing/no-unmatched-pair -->

<Tabs
  defaultValue="npx"
  values={[
    {label: 'npx', value: 'npx'},
    {label: 'npm script', value: 'npm-script'},
  ]}>

<!-- textlint-enable ja-technical-writing/sentence-length,ja-technical-writing/max-comma,ja-spacing/ja-no-space-around-parentheses,jtf-style/3.3.ã‹ã£ã“é¡ã¨éš£æ¥ã™ã‚‹æ–‡å­—ã®é–“ã®ã‚¹ãƒšãƒ¼ã‚¹ã®æœ‰ç„¡,ja-technical-writing/ja-no-mixed-period,ja-technical-writing/no-unmatched-pair -->

<TabItem value="npx">

ä»¥ä¸‹ã®ã‚ˆã†ã«`npx`ã§ç”Ÿæˆã™ã‚‹ã€‚

```console
npx openapi-generator-cli generate -g typescript-fetch -i https://raw.githubusercontent.com/ws-4020/mobile-app-hands-on-backend/main/rest-api-specification/openapi.yaml -o src/backend/generated-rest-client --additional-properties supportsES6=true,typescriptThreePlus=true
```
</TabItem>

<TabItem value="npm-script">

ä»¥ä¸‹ã®ä¾‹ã®ã‚ˆã†ã«`npm script`ã«è‡ªå‹•ç”Ÿæˆç”¨ã®scriptã‚’è¿½åŠ ã—ã¦`npm run api:gen-client`ã§ç”Ÿæˆã™ã‚‹ã€‚

```diff title="package.json"
     "reset-cache:all": "node .script/runner.js reset-cache --all",
-    "reset-cache:interactive": "node .script/runner.js reset-cache --interactive"
+    "reset-cache:interactive": "node .script/runner.js reset-cache --interactive",
+    "api:gen-client": "openapi-generator-cli generate -g typescript-fetch -i https://raw.githubusercontent.com/ws-4020/mobile-app-hands-on-backend/main/rest-api-specification/openapi.yaml -o src/backend/generated-rest-client --additional-properties supportsES6=true,typescriptThreePlus=true"
   },
```
</TabItem>

</Tabs>

## APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ç°¡å˜ãªèª¬æ˜

ãã‚Œã§ã¯ã€è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸAPIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ç°¡å˜ã«è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

> ğŸš§ ä½œæˆä¸­ ğŸš§

<!--
TODO: ãŸã¶ã‚“ã€ã“ã“ã§Configã‚¯ãƒ©ã‚¹ã®èª¬æ˜ã¨ã‹ã€ã©ã†ä¿®æ­£ã™ã‚‹ã‹ã‚’èª¬æ˜ã—ãŸã»ã†ãŒã„ã„ã€‚
      Middlewareã®èª¬æ˜ã¨ã‹ã¯å¿…è¦ãªã„ã‘ã©ã€apisã¨modelsã®ä¸­èº«ãã‚‰ã„ã¯ç´¹ä»‹ã—ã¦ã‚ã’ã‚‹ã®ãŒã„ã„ã‚“ã˜ã‚ƒãªã„ã‹ãªã€ã¨ã€‚
      ã‚ã¨ã¯ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã«å¿œã˜ã¦rejectã•ã‚Œã‚‹ã¨ã„ã†è©±ã‚‚ç´¹ä»‹ã—ãŸã»ã†ãŒã„ã„æ°—ãŒã™ã‚‹ã€‚
-->

ã“ã‚Œã§ã€`TodoService`ã‹ã‚‰REST APIã‚’å‘¼ã³ã ã™æº–å‚™ãŒæ•´ã„ã¾ã—ãŸã€‚æ¬¡ã¯ã€å®Ÿéš›ã«`TodoService`ã‹ã‚‰REST APIã‚’å‘¼ã³å‡ºã—ã¦ã€çµæœã‚’ç”»é¢ã«è¡¨ç¤ºã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
